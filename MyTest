import org.ff4j.FF4j;
import org.ff4j.store.FeatureStoreJdbc;
import org.ff4j.store.PropertyStoreJdbc;
import org.ff4j.store.EventRepositoryJdbc;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

import javax.sql.DataSource;

@Configuration
public class FF4jConfig {

    @Bean
    public FF4j ff4j(DataSource dataSource) {
        FF4j ff4j = new FF4j();
        ff4j.setFeatureStore(new FeatureStoreJdbc(dataSource));
        ff4j.setPropertiesStore(new PropertyStoreJdbc(dataSource));
        ff4j.setEventRepository(new EventRepositoryJdbc(dataSource));
        ff4j.audit(true);
        return ff4j;
    }
}



spring:
  h2:
    console:
      enabled: true
      path: /h2-console
  datasource:
    url: jdbc:h2:mem:testdb
    username: sa
    password:
    driver-class-name: org.h2.Driver
