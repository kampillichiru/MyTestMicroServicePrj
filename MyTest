import org.springframework.http.HttpHeaders;
import org.springframework.ws.client.support.interceptor.ClientInterceptorAdapter;
import org.springframework.ws.context.MessageContext;
import org.springframework.ws.transport.http.HttpTransportConstants;
import org.springframework.ws.transport.http.HttpUrlConnection;

public class CustomHttpHeaderInterceptor extends ClientInterceptorAdapter {

    @Override
    public boolean handleRequest(MessageContext messageContext) {
        try {
            HttpUrlConnection connection = (HttpUrlConnection) messageContext.getProperty(HttpTransportConstants.HTTP_URL_CONNECTION);
            if (connection != null) {
                connection.getConnection().setRequestProperty("Authorization", "Bearer my-token");
                connection.getConnection().setRequestProperty("X-Custom-Header", "CustomValue");
            }
        } catch (Exception e) {
            throw new RuntimeException("Failed to add HTTP headers", e);
        }
        return true;
    }
}
